deploymentMode: SingleBinary

serviceAccount:
  create: false
  name: loki-sa

loki:
  auth_enabled: false

  # Do NOT set commonConfig in single-binary; it triggers distributed storage templating.
  # commonConfig:
  #   replication_factor: 1

  server:
    http_listen_port: 3100

  schemaConfig:
    configs:
      - from: 2024-01-01
        store: boltdb-shipper
        object_store: gcs
        schema: v13
        index:
          prefix: loki_index_
          period: 24h

  # SingleBinary storage â€“ no bucketNames, no "loki.storage"
  storage_config:
    boltdb_shipper:
      shared_store: gcs
    gcs:
      bucket_name: loki-nbss

  limits_config:
    reject_old_samples: true
    reject_old_samples_max_age: 168h

singleBinary:
  replicas: 1

resources:
  requests:
    cpu: 200m
    memory: 512Mi
  limits:
    memory: 1Gi
